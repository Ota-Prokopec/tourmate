{"version":3,"file":"index.js","sources":["../../src/actions/convert.ts","../../src/actions/setPermissions.ts"],"sourcesContent":["type Functions = 'delete' | 'read' | 'update' | 'create' | 'write'\ntype UserOrTeam = 'users' | 'teams'\nexport const convert = (permissions: string[]) => {\n\tif (typeof permissions === 'object') permissions = Object.values(permissions) //because appwrite sometimes gives you [] permissions and sometimes {}\n\tconst arr = permissions?.map((permission): { [key: string]: string } => {\n\t\tconst propetries = permission.split('(').join(')').split(')')\n\t\tconst key = propetries[0]\n\t\tconst value = propetries[1]\n\t\tif (!key || !value) throw new Error('Invalid permissions array')\n\t\treturn {\n\t\t\t[key]: JSON.parse(value) as string,\n\t\t}\n\t})\n\tconst object: {\n\t\tdelete: { users: string[]; teams: string[] }\n\t\tread: { users: string[]; teams: string[] }\n\t\tupdate: { users: string[]; teams: string[] }\n\t\tcreate: { users: string[]; teams: string[] }\n\t\twrite: { users: string[]; teams: string[] }\n\t} = {\n\t\tdelete: { users: [], teams: [] },\n\t\tread: { users: [], teams: [] },\n\t\tupdate: { users: [], teams: [] },\n\t\tcreate: { users: [], teams: [] },\n\t\twrite: { users: [], teams: [] },\n\t}\n\tarr?.forEach((item) => {\n\t\tconst [key, value] = Object.entries(item)[0] as [Functions, string]\n\t\tconst role: UserOrTeam = `${value.split(':')[0]}s` as UserOrTeam\n\t\tconst ID = value.split(':')[1]\n\t\tif (!object[key][role]) object[key][role] = []\n\t\tobject[key][role] = [...object[key][role], ID || 'any-has-value-empty']\n\t})\n\treturn object\n}\n","import { Permission, Role } from 'appwrite'\n\nexport const owner = (...userIds: string[]) =>\n\tuserIds.flatMap((userId) => [\n\t\tPermission.read(Role.user(userId)),\n\t\tPermission.write(Role.user(userId)),\n\t\tPermission.update(Role.user(userId)),\n\t\tPermission.delete(Role.user(userId)),\n\t])\n\nexport const read = (...userIds: string[]) => userIds.map((userId) => Permission.read(Role.user(userId)))\nexport const readAny = () => [Permission.read(Role.any())]\n"],"names":["Permission","Role"],"mappings":"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"}